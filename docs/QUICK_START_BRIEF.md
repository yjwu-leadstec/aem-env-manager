# AEM Environment Manager - å¿«é€Ÿå¯åŠ¨ç®€æŠ¥

> æœ¬æ–‡æ¡£ä¸ºå¼€å‘å›¢é˜Ÿæä¾›å¿«é€Ÿä¸Šæ‰‹æŒ‡å—ï¼Œå¸®åŠ©ç«‹å³å¼€å§‹é¡¹ç›®å¼€å‘ã€‚

---

## ğŸ¯ é¡¹ç›®ä¸€å¥è¯æè¿°

**AEM å¼€å‘è€…çš„ç¯å¢ƒåˆ‡æ¢ç¥å™¨** - ä¸€é”®åˆ‡æ¢ Javaã€Nodeã€Maven å’Œ AEM å®ä¾‹é…ç½®ï¼Œå‘Šåˆ«æ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶çš„ç—›è‹¦ã€‚

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„é€Ÿè§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯ (React)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚Dashboardâ”‚ â”‚ Profile â”‚ â”‚   AEM   â”‚ â”‚ Version â”‚           â”‚
â”‚  â”‚  Page   â”‚ â”‚  Page   â”‚ â”‚  Page   â”‚ â”‚  Pages  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜           â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                                    â”‚
â”‚            â”‚  Zustand  â”‚ (çŠ¶æ€ç®¡ç†)                         â”‚
â”‚            â”‚   Store   â”‚                                    â”‚
â”‚            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  â”‚ Tauri IPC                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                                    â”‚
â”‚            â”‚  Commands â”‚ (Rust åç«¯)                        â”‚
â”‚            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚  Java   â”‚ â”‚  AEM  â”‚ â”‚ Config â”‚                         â”‚
â”‚  â”‚  Cmds   â”‚ â”‚ Cmds  â”‚ â”‚  Cmds  â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                         â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                                    â”‚
â”‚            â”‚ Platform  â”‚ (è·¨å¹³å°é€‚é…)                       â”‚
â”‚            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚  macOS  â”‚          â”‚ Windows  â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„

```
aem-env-manager/
â”œâ”€â”€ docs/                           # ğŸ“– æ–‡æ¡£
â”‚   â”œâ”€â”€ PRD/                        #    äº§å“éœ€æ±‚æ–‡æ¡£
â”‚   â”œâ”€â”€ design/                     #    æŠ€æœ¯è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ ui-design-themes/           #    UI è®¾è®¡ç¨¿ (22ä¸ªä¸»é¢˜HTML)
â”‚   â”œâ”€â”€ IMPLEMENTATION_PLAN.md      #    å®æ–½è®¡åˆ’ (æœ¬æ¬¡ç”Ÿæˆ)
â”‚   â””â”€â”€ QUICK_START_BRIEF.md        #    å¿«é€Ÿå¯åŠ¨ç®€æŠ¥ (æœ¬æ–‡æ¡£)
â”œâ”€â”€ openspec/                       # ğŸ“‹ OpenSpec è§„èŒƒ
â”‚   â””â”€â”€ project.md                  #    é¡¹ç›®ä¸Šä¸‹æ–‡
â”œâ”€â”€ src/                            # ğŸ¨ å‰ç«¯æºç  (å¾…åˆ›å»º)
â”‚   â”œâ”€â”€ components/                 #    UI ç»„ä»¶
â”‚   â”œâ”€â”€ pages/                      #    é¡µé¢
â”‚   â”œâ”€â”€ hooks/                      #    è‡ªå®šä¹‰ Hooks
â”‚   â”œâ”€â”€ store/                      #    Zustand çŠ¶æ€
â”‚   â”œâ”€â”€ services/                   #    Tauri å‘½ä»¤å°è£…
â”‚   â”œâ”€â”€ types/                      #    TypeScript ç±»å‹
â”‚   â””â”€â”€ utils/                      #    å·¥å…·å‡½æ•°
â”œâ”€â”€ src-tauri/                      # ğŸ¦€ Rust åç«¯ (å¾…åˆ›å»º)
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ commands/               #    Tauri å‘½ä»¤
â”‚       â”‚   â”œâ”€â”€ config.rs
â”‚       â”‚   â”œâ”€â”€ java.rs
â”‚       â”‚   â”œâ”€â”€ node.rs
â”‚       â”‚   â”œâ”€â”€ maven.rs
â”‚       â”‚   â”œâ”€â”€ aem.rs
â”‚       â”‚   â””â”€â”€ system.rs
â”‚       â””â”€â”€ platform/               #    å¹³å°é€‚é…
â”‚           â”œâ”€â”€ macos.rs
â”‚           â””â”€â”€ windows.rs
â””â”€â”€ tests/                          # ğŸ§ª æµ‹è¯• (å¾…åˆ›å»º)
```

---

## ğŸš€ ç«‹å³å¼€å§‹ - ç¬¬ä¸€å‘¨ä»»åŠ¡

### Day 1-2: é¡¹ç›®åˆå§‹åŒ–

```bash
# 1. åˆ›å»º Tauri é¡¹ç›®
npm create tauri-app@latest aem-env-manager -- --template react-ts

# 2. è¿›å…¥é¡¹ç›®ç›®å½•
cd aem-env-manager

# 3. å®‰è£…ä¾èµ–
npm install

# 4. å®‰è£…å‰ç«¯åº“
npm install @tanstack/react-router zustand lucide-react

# 5. åˆå§‹åŒ– Tailwind CSS
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p

# 6. åˆå§‹åŒ– shadcn/ui
npx shadcn@latest init

# 7. æ·»åŠ æ ¸å¿ƒç»„ä»¶
npx shadcn@latest add button card input dialog select badge tabs toast
```

### Day 3: é…ç½® Rust ä¾èµ–

ç¼–è¾‘ `src-tauri/Cargo.toml`:

```toml
[dependencies]
tauri = { version = "2", features = ["shell-open"] }
serde = { version = "1", features = ["derive"] }
serde_json = "1"
serde_yaml = "0.9"
tokio = { version = "1", features = ["full"] }
reqwest = { version = "0.11", features = ["json"] }
keyring = "2"
```

### Day 4-5: æ­å»ºåŸºç¡€æ¶æ„

**åˆ›å»ºå‰ç«¯ç›®å½•ç»“æ„:**
```bash
mkdir -p src/{components,pages,hooks,store,services,types,utils}
mkdir -p src/components/{layout,common}
```

**åˆ›å»ºåç«¯ç›®å½•ç»“æ„:**
```bash
mkdir -p src-tauri/src/{commands,platform}
```

---

## ğŸ“Š æ ¸å¿ƒæ•°æ®æ¨¡å‹

### Profile (ç¯å¢ƒé…ç½®)

```typescript
interface Profile {
  id: string;
  name: string;
  description?: string;
  color?: string;
  environment: {
    java?: string;      // Java ç‰ˆæœ¬ ID
    node?: string;      // Node ç‰ˆæœ¬ ID
    maven?: string;     // Maven é…ç½® ID
  };
  aemInstances: string[];  // AEM å®ä¾‹ ID æ•°ç»„
  projectDir?: string;
  envVars?: Record<string, string>;
}
```

### AEM Instance (AEM å®ä¾‹)

```typescript
interface AemInstance {
  id: string;
  name: string;
  type: 'author' | 'publish';
  url: string;
  username: string;
  password: string;  // åŠ å¯†å­˜å‚¨
  jarPath?: string;
  runDir?: string;
  jvmArgs?: string;
  licenseId?: string;
}

interface AemStatus {
  running: boolean;
  version?: string;
  type?: string;  // 'Cloud Service' | '6.5.x'
  uptime?: number;
  oakVersion?: string;
}
```

### Version (ç‰ˆæœ¬ä¿¡æ¯)

```typescript
interface JavaVersion {
  id: string;
  version: string;
  path: string;
  vendor?: string;
  isDefault: boolean;
}

interface NodeVersion {
  id: string;
  version: string;
  path: string;
  isDefault: boolean;
}
```

---

## ğŸ”Œ å…³é”® Tauri Commands

### å¿…é¡»é¦–å…ˆå®ç°çš„å‘½ä»¤ (Week 3-5)

| ä¼˜å…ˆçº§ | å‘½ä»¤ | æè¿° |
|--------|------|------|
| ğŸ”´ | `load_config` | åŠ è½½å…¨å±€é…ç½® |
| ğŸ”´ | `save_config` | ä¿å­˜å…¨å±€é…ç½® |
| ğŸ”´ | `scan_java_versions` | æ‰«æ Java ç‰ˆæœ¬ |
| ğŸ”´ | `switch_java_version` | åˆ‡æ¢ Java ç‰ˆæœ¬ |
| ğŸ”´ | `get_aem_status` | è·å– AEM çŠ¶æ€ |
| ğŸ”´ | `start_aem_instance` | å¯åŠ¨ AEM |
| ğŸ”´ | `stop_aem_instance` | åœæ­¢ AEM |
| ğŸŸ¡ | `scan_node_versions` | æ‰«æ Node ç‰ˆæœ¬ |
| ğŸŸ¡ | `switch_node_version` | åˆ‡æ¢ Node ç‰ˆæœ¬ |
| ğŸŸ¡ | `switch_maven_config` | åˆ‡æ¢ Maven é…ç½® |

---

## ğŸ¨ UI è®¾è®¡å‚è€ƒ

å·²æœ‰ 22 ä¸ª UI ä¸»é¢˜è®¾è®¡ç¨¿ï¼Œä½äº:
```
docs/ui-design-themes/aem-env-manager-ui-themes/
```

**æ¨èä¸»é¢˜:**
- `aem-env-manager-ui-dark.html` - æ·±è‰²ä¸»é¢˜ (æ¨è)
- `aem-env-manager-ui-fluent.html` - Fluent Design é£æ ¼
- `aem-env-manager-ui-material.html` - Material Design é£æ ¼

å¯åœ¨æµè§ˆå™¨ä¸­ç›´æ¥æ‰“å¼€ HTML æ–‡ä»¶é¢„è§ˆæ•ˆæœã€‚

---

## âš¡ å¼€å‘å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼ (å‰ç«¯çƒ­é‡è½½)
npm run tauri dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run tauri build

# ä»…å‰ç«¯å¼€å‘ (ä¸å¯åŠ¨ Tauri)
npm run dev

# ç±»å‹æ£€æŸ¥
npm run typecheck

# ä»£ç æ ¼å¼åŒ–
npm run lint
npm run format

# Rust æ ¼å¼åŒ–
cd src-tauri && cargo fmt

# Rust æµ‹è¯•
cd src-tauri && cargo test
```

---

## ğŸ“‹ å¼€å‘æ£€æŸ¥æ¸…å•

### Phase 0 å®Œæˆæ ‡å‡†
- [ ] åº”ç”¨å¯åœ¨ macOS ä¸Šè¿è¡Œ
- [ ] åº”ç”¨å¯åœ¨ Windows ä¸Šè¿è¡Œ
- [ ] CI/CD æµæ°´çº¿é…ç½®å®Œæˆ
- [ ] ESLint/Prettier/rustfmt é…ç½®å®Œæˆ

### Phase 1 å®Œæˆæ ‡å‡†
- [ ] æ‰€æœ‰å¹³å°é€‚é…å‡½æ•°å®ç°å¹¶æµ‹è¯•
- [ ] Java ç‰ˆæœ¬æ‰«æå’Œåˆ‡æ¢æ­£å¸¸å·¥ä½œ
- [ ] Node ç‰ˆæœ¬æ‰«æå’Œåˆ‡æ¢æ­£å¸¸å·¥ä½œ
- [ ] AEM å®ä¾‹å¯åŠ¨/åœæ­¢æ­£å¸¸å·¥ä½œ
- [ ] é…ç½®æ–‡ä»¶ä¿å­˜/åŠ è½½æ­£å¸¸å·¥ä½œ

### Phase 2 å®Œæˆæ ‡å‡†
- [ ] é¦–æ¬¡ä½¿ç”¨å‘å¯¼å®Œæ•´æµç¨‹
- [ ] ä»ªè¡¨ç›˜æ˜¾ç¤ºæ‰€æœ‰çŠ¶æ€ä¿¡æ¯
- [ ] Profile åˆ›å»º/ç¼–è¾‘/åˆ é™¤/åˆ‡æ¢
- [ ] æ‰€æœ‰ç‰ˆæœ¬ç®¡ç†é¡µé¢åŠŸèƒ½å®Œæ•´

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: Tauri 2.0 å’Œ 1.x æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
A: Tauri 2.0 å¼•å…¥äº†æ–°çš„æƒé™ç³»ç»Ÿ (capabilities)ï¼Œéœ€è¦åœ¨ `src-tauri/capabilities/` ç›®å½•é…ç½®æƒé™ã€‚

### Q: å¦‚ä½•å¤„ç†è·¨å¹³å°å·®å¼‚ï¼Ÿ
A: åœ¨ `src-tauri/src/platform/` ç›®å½•ä½¿ç”¨ Rust æ¡ä»¶ç¼–è¯‘:
```rust
#[cfg(target_os = "macos")]
fn get_java_home() -> PathBuf { ... }

#[cfg(target_os = "windows")]
fn get_java_home() -> PathBuf { ... }
```

### Q: å¦‚ä½•å®‰å…¨å­˜å‚¨å¯†ç ï¼Ÿ
A: ä½¿ç”¨ `keyring` crate è®¿é—®æ“ä½œç³»ç»Ÿçš„å¯†é’¥é“¾:
```rust
use keyring::Entry;
let entry = Entry::new("aem-env-manager", "instance-password")?;
entry.set_password("secret")?;
```

---

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **é˜…è¯»å®Œæ•´å®æ–½è®¡åˆ’**: `docs/IMPLEMENTATION_PLAN.md`
2. **æŸ¥çœ‹ PRD äº†è§£åŠŸèƒ½ç»†èŠ‚**: `docs/PRD/AEM-Environment-Manager-PRD.md`
3. **æŸ¥çœ‹è®¾è®¡æ–‡æ¡£äº†è§£æŠ€æœ¯ç»†èŠ‚**: `docs/design/AEM-Environment-Manager-Design.md`
4. **é¢„è§ˆ UI è®¾è®¡**: åœ¨æµè§ˆå™¨æ‰“å¼€ `docs/ui-design-themes/` ä¸­çš„ HTML æ–‡ä»¶
5. **å¼€å§‹ Phase 0**: è¿è¡Œé¡¹ç›®åˆå§‹åŒ–å‘½ä»¤

---

**Good luck! ğŸš€**
